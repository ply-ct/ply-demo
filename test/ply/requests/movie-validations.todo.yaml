# TODO: CONVERT TO NEW FORMAT

test: bad post
request:
  url: '${baseUrl}/movies'
  method: POST
  headers:
    Accept: application/json
    Content-Type: application/json
  body: |-
    {
      "credits": [
        {
          "name": "Alan Crosland",
          "role": "director"
        },
        {
          "name": "Warren William",
          "role": "actor"
        },
        {
          "name": "Mary Astor",
          "role": "actor"
        },
        {
          "name": "Allen Jenkins",
          "role": "actor"
        },
        {
          "name": "Grant Mitchell",
          "role": "actor"
        },
        {
          "name": "Helen Trenholme",
          "role": "actor"
        }
      ],
      "poster": "cothd.jpg",
      "webRef": {
        "ref": "tt0024958",
        "site": "imdb.com"
      },
      "year": 1812
    }
response:
  status:
    code: 400
    message: Bad Request
  headers:
    content-type: application/json${~.*}
  body: |-
    {
      "status": {
        "code": 400,
        "message": "[\"title is required\", \"year: value '1812' is less than minimum (1900)\"]"
      }
    }
test: create movie
request:
  url: '${baseUrl}/movies'
  method: POST
  headers:
    Accept: application/json
    Content-Type: application/json
  body: |-
    {
      "credits": [
        {
          "name": "Alan Crosland",
          "role": "director"
        },
        {
          "name": "Warren William",
          "role": "actor"
        },
        {
          "name": "Mary Astor",
          "role": "actor"
        },
        {
          "name": "Allen Jenkins",
          "role": "actor"
        },
        {
          "name": "Grant Mitchell",
          "role": "actor"
        },
        {
          "name": "Helen Trenholme",
          "role": "actor"
        }
      ],
      "poster": "cothd.jpg",
      "title": "The Case of the Howling Dog",
      "webRef": {
        "ref": "tt0024958",
        "site": "imdb.com"
      },
      "year": 1934
    }
response:
  status:
    code: 201
    message: Created
  headers:
    content-type: application/json
    location: '${baseUrl}/movies/${id}'
  body: |-
    {
      "credits": [
        {
          "name": "Alan Crosland",
          "role": "director"
        },
        {
          "name": "Warren William",
          "role": "actor"
        },
        {
          "name": "Mary Astor",
          "role": "actor"
        },
        {
          "name": "Allen Jenkins",
          "role": "actor"
        },
        {
          "name": "Grant Mitchell",
          "role": "actor"
        },
        {
          "name": "Helen Trenholme",
          "role": "actor"
        }
      ],
      "id": "${id}",
      "poster": "cothd.jpg",
      "title": "The Case of the Howling Dog",
      "webRef": {
        "ref": "tt0024958",
        "site": "imdb.com"
      },
      "year": 1934
    }
test: movie-validations
request:
  url: '${baseUrl}/movies/${id}'
  method: PUT
  headers:
    Accept: application/json
    Content-Type: application/json
  body: |-
    {
      "credits": [
        {
          "name": "Alan Crosland",
          "role": "director"
        },
        {
          "name": "Warren William",
          "role": "actor"
        },
        {
          "name": "Mary Astor",
          "role": "actor"
        },
        {
          "name": "Allen Jenkins",
          "role": "actor"
        },
        {
          "name": "Grant Mitchell",
          "role": "actor"
        },
        {
          "name": "Helen Trenholme",
          "role": "actor"
        }
      ],
      "id": "${id}",
      "poster": "cothd.jpg",
      "rating": 5.2,
      "title": "The Case of the Howling Dog",
      "webRef": {
        "ref": "tt0024958",
        "site": "imdb.com"
      },
      "year": 1934
    }
response:
  status:
    code: 400
    message: Bad Request
  headers:
    content-type: application/json${~.*}
  body: |-
    {
      "status": {
        "code": 400,
        "message": "[\"rating: value '5.2' exceeds maximum (5)\", \"rating: value '5.2' must be a multiple of 0.5\"]"
      }
    }
test: movie-validations
request:
  url: '${baseUrl}/movies/${id}'
  method: GET
  headers:
    Accept: application/json
response:
  status:
    code: 200
    message: OK
  headers:
    content-type: application/json
  body: |-
    {
      "credits": [
        {
          "name": "Alan Crosland",
          "role": "director"
        },
        {
          "name": "Warren William",
          "role": "actor"
        },
        {
          "name": "Mary Astor",
          "role": "actor"
        },
        {
          "name": "Allen Jenkins",
          "role": "actor"
        },
        {
          "name": "Grant Mitchell",
          "role": "actor"
        },
        {
          "name": "Helen Trenholme",
          "role": "actor"
        }
      ],
      "id": "${id}",
      "poster": "cothd.jpg",
      "title": "The Case of the Howling Dog",
      "webRef": {
        "ref": "tt0024958",
        "site": "imdb.com"
      },
      "year": 1934
    }
test: movie-validations
request:
  url: '${baseUrl}/movies/${id}'
  method: DELETE
  headers:
    Accept: application/json
response:
  status:
    code: 200
    message: OK
  headers:
    content-type: application/json
  body: |-
    {
      "status": {
        "code": 200,
        "message": "Movie deleted: ${id}"
      }
    }